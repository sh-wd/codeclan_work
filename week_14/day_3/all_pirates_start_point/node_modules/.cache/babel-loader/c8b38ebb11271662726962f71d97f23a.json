{"ast":null,"code":"import _slicedToArray from \"/Users/user/Desktop/g36/codeclan_work/week_14/day_3/all_pirates_start_point/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/user/Desktop/g36/codeclan_work/week_14/day_3/all_pirates_start_point/src/containers/PirateContainer.js\";\nimport React, { Component, Fragment, useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Routes, useParams } from 'react-router-dom';\nimport PirateList from '../components/pirates/PirateList';\nimport Request from '../helpers/request.js';\nimport PirateDetail from '../components/pirates/PirateDetail';\nimport PirateForm from '../components/pirates/PirateForm';\nimport PirateEditForm from '../components/pirates/PirateEditForm';\n\nvar PirateContainer = function PirateContainer() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      pirates = _useState2[0],\n      setPirates = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      ships = _useState4[0],\n      setShips = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      raids = _useState6[0],\n      setRaids = _useState6[1];\n\n  useEffect(function () {\n    getPirates();\n    getShips();\n    getRaids();\n  }, []);\n\n  var getPirates = function getPirates() {\n    var request = new Request();\n    request.get(\"/api/pirates\").then(function (data) {\n      console.log(data);\n      setPirates(data);\n    });\n  };\n\n  var getShips = function getShips() {\n    var request = new Request();\n    request.get(\"/api/ships\").then(function (data) {\n      return setShips(data);\n    });\n  };\n\n  var getRaids = function getRaids() {\n    var request = new Request();\n    request.get(\"/api/raids\").then(function (data) {\n      return setRaids(data);\n    });\n  };\n\n  var PirateDetailWrapper = function PirateDetailWrapper() {\n    console.log(\"wrapper triggered\"); //extract id from url\n\n    var _useParams = useParams(),\n        id = _useParams.id;\n\n    var foundPirate = findPirateById(id);\n    return React.createElement(PirateDetail, {\n      pirate: foundPirate,\n      handleDelete: handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    });\n  };\n\n  var PirateEditWrapper = function PirateEditWrapper() {\n    var _useParams2 = useParams(),\n        id = _useParams2.id;\n\n    var foundPirate = findPirateById(id);\n    return React.createElement(PirateEditForm, {\n      pirate: foundPirate,\n      ships: ships,\n      handleUpdate: handleUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    });\n  };\n\n  var findPirateById = function findPirateById(id) {\n    var foundPirate = null;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = pirates[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var pirate = _step.value;\n\n        if (pirate.id === parseInt(id)) {\n          foundPirate = pirate;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return foundPirate;\n  };\n\n  var handleDelete = function handleDelete(id) {\n    var request = new Request();\n    var url = \"/api/pirates/\" + id;\n    request.delete(url).then(function () {\n      window.location = \"/pirates\";\n    });\n  };\n\n  var handlePost = function handlePost(pirate) {\n    var request = new Request();\n    request.post(\"/api/pirates\", pirate).then(function () {\n      window.location = \"/pirates\";\n    });\n\n    handleUpdate = function handleUpdate(pirate) {\n      var request = new Request();\n      request.patch(\"/api/pirates/\" + pirate.id).then(function () {\n        window.location = \"/pirates/\" + pirate.id;\n      });\n    };\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Routes, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/:id\",\n    element: React.createElement(PirateDetailWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), pirates.length > 0 ? React.createElement(Route, {\n    path: \"/\",\n    element: React.createElement(PirateList, {\n      pirates: pirates,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }) : null, React.createElement(Route, {\n    path: \"/new\",\n    element: React.createElement(PirateForm, {\n      ships: ships,\n      onCreate: handlePost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/edit/:id\",\n    element: React.createElement(PirateEditWrapper, {\n      handleUpdate: handleUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })));\n};\n\nexport default PirateContainer;","map":{"version":3,"sources":["/Users/user/Desktop/g36/codeclan_work/week_14/day_3/all_pirates_start_point/src/containers/PirateContainer.js"],"names":["React","Component","Fragment","useEffect","useState","BrowserRouter","Router","Route","Switch","Routes","useParams","PirateList","Request","PirateDetail","PirateForm","PirateEditForm","PirateContainer","pirates","setPirates","ships","setShips","raids","setRaids","getPirates","getShips","getRaids","request","get","then","data","console","log","PirateDetailWrapper","id","foundPirate","findPirateById","handleDelete","PirateEditWrapper","handleUpdate","pirate","parseInt","url","delete","window","location","handlePost","post","patch","length"],"mappings":"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","sourcesContent":["import React, {Component, Fragment, useEffect, useState} from 'react';\nimport {BrowserRouter as Router, Route, Switch, Routes, useParams} from 'react-router-dom';\nimport PirateList from '../components/pirates/PirateList';\nimport Request from '../helpers/request.js';\nimport PirateDetail from '../components/pirates/PirateDetail';\nimport PirateForm from '../components/pirates/PirateForm';\nimport PirateEditForm from '../components/pirates/PirateEditForm';\n\nconst PirateContainer = () => {\n\n  const [pirates, setPirates] = useState([]);\n  const [ships, setShips] = useState([]);\n  const [raids, setRaids] = useState([]);\n\n  useEffect(() => {\n    getPirates()\n    getShips()\n    getRaids()\n  }, [])\n\n  const getPirates = () => {\n    const request = new Request()\n    request.get(\"/api/pirates\")\n    .then((data) => {\n      console.log(data)\n      setPirates(data)\n    })\n  }\n\n  const getShips = () => {\n    const request = new Request()\n    request.get(\"/api/ships\")\n    .then((data) => setShips(data));\n  }\n\n  const getRaids = () => {\n    const request = new Request()\n    request.get(\"/api/raids\")\n    .then((data) => setRaids(data));\n  }\n\n  const PirateDetailWrapper = () => {\n    console.log(\"wrapper triggered\")\n    //extract id from url\n    const {id} = useParams()\n    let foundPirate = findPirateById(id)\n    return <PirateDetail pirate={foundPirate} handleDelete={handleDelete}/>\n  }\n\n  const PirateEditWrapper = () => {\n    const {id} = useParams()\n    let foundPirate =findPirateById(id)\n    return <PirateEditForm pirate={foundPirate} ships={ships} handleUpdate={handleUpdate}/>\n  }\n\n  const findPirateById = (id) => {\n    let foundPirate = null;\n    for (let pirate of pirates){\n      if(pirate.id === parseInt(id)){\n        foundPirate = pirate\n      }\n    }\n    return foundPirate;\n  }\n\n  const handleDelete = (id) => {\n    const request = new Request()\n    const url = \"/api/pirates/\" + id;\n    request.delete(url)\n    .then(() => {\n      window.location= \"/pirates\"\n    })\n  }\n    const handlePost = (pirate) => {\n      const request = new Request()\n      request.post(\"/api/pirates\", pirate)\n      .then(() => {\n        window.location = \"/pirates\"\n      })\n  \n      handleUpdate = (pirate) => {\n        const request = new Request()\n        request.patch(\"/api/pirates/\" + pirate.id)\n        .then(() => {\n          window.location = \"/pirates/\" + pirate.id\n        })\n      }\n\n  }\n\n    return(\n      <div>\n        <Routes>\n          <Route path=\"/:id\" element={<PirateDetailWrapper/>}/>\n          {pirates.length> 0 ? <Route path=\"/\" element={<PirateList pirates={pirates}/>}/> :null}\n          <Route path=\"/new\" element={<PirateForm ships={ships} onCreate={handlePost}/>}/>\n          <Route path=\"/edit/:id\" element={<PirateEditWrapper handleUpdate={handleUpdate}/>}/>\n        </Routes>\n      </div>\n      )\n\n\n}\n\n\n\n\nexport default PirateContainer;\n"]},"metadata":{},"sourceType":"module"}